# 多数据库

一个redis实例最多可提供16个数据库，小标从0到15。客户端默认连接到0号数据库，可以通过select命令选择连接到其他数据库

```
select 3
```

## 将key移植到其他库

- move key 数据库索引号

# 服务器命令

- ping

    测试服务器连接是否正常。能正常连接返回PONG；不能则返回错误信息

- echo msg

    在控制台输出msg

- quit

    退出连接

- dbsize

    返回当前数据库key的数目

- info

    获取服务器信息和统计

- flushdb

    删除当前数据库中所有key

- flushall

    删除所有数据库中的所有key

# 消息订阅和发布

- subscribe channel

    订阅频道。订阅后，多一只等待接收所定义的频道发布的信息。

- psubscribe channel*

    批量订阅频道

- publish channel content

    在指定的channel中发布content消息

# redis的事务

redis数据库的事务与关系型数据库的事务区别非常大，这里的事务更像是批处理。多个修改操作中，如果中间出错了，事务不会自动回滚，其他没有出错的操作仍然正常保留。

事务中的命令是串行化顺序执行的，并且在事务期间不会再接收其他客户端请求，从而保证原子性

## 相关命令

- multi

    开启事务标记，执行这了命令后，后续输入的命令将存入命令队列，直到执行exec时，这些命令才会被执行。

- exec

    提交事务。

- discard

    事务回滚。

注意：

- 在开启事务前，如果客户端与服务器通讯出现故障，并导致网络断开，那么后续的命令将都不执行。
- 如果网络中断发生在客户端执行exec命令后，则该事务中的所有命令都会被执行